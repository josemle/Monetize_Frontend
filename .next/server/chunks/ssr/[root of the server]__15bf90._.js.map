{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Ref/Programming/Practise/5/partner/src/components/index.js"],"sourcesContent":["import React from \"react\";\r\n\r\nexport function MainButton({ onClick, disabled, label }) {\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      disabled={disabled}\r\n      className={`inline-flex rounded-md shadow disabled:opacity-50`}\r\n    >\r\n      <span\r\n        className={`inline-flex items-center justify-center px-5 py-3 border-transparent text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700`}\r\n      >\r\n        {label}\r\n      </span>\r\n    </button>\r\n  );\r\n}\r\n\r\nexport function AddressInput({ label, value, onChange, onBlur, error }) {\r\n  return (\r\n    <div className=\"flex flex-col\">\r\n      <label htmlFor={label}>{label}</label>\r\n      <input\r\n        name={label}\r\n        value={value}\r\n        type=\"text\"\r\n        onChange={(event) => onChange(event.target.value)}\r\n        onBlur={(event) => onBlur(event.target.value)}\r\n        className={\"form-input rounded px-4 py-3\"}\r\n        placeholder=\"Wallet Address\"\r\n      />\r\n      {error ? (\r\n        <p className=\"text-red-600 text-sm\">{error}</p>\r\n      ) : (\r\n        <p className=\"text-sm\">&nbsp;</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function SplitInput({ name, value, onChange }) {\r\n  return (\r\n    <div className=\"flex flex-col\">\r\n      <label htmlFor={`split-${name}`}>Split</label>\r\n      <input\r\n        name={`split-${name}`}\r\n        value={value}\r\n        type=\"number\"\r\n        onChange={(event) => onChange(Number(event.target.value))}\r\n        className={\"form-input rounded px-4 py-3\"}\r\n        placeholder={1}\r\n        min={1}\r\n        step={1}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function PartnerInput({ address, split }) {\r\n  return (\r\n    <div className={\"flex\"}>\r\n      <div className={\"mr-3 w-full\"}>\r\n        <AddressInput\r\n          label={address.label}\r\n          value={address.value}\r\n          onChange={address.onChange}\r\n          onBlur={address.onBlur}\r\n          error={address.error}\r\n        />\r\n      </div>\r\n      <div className={\"w-1/5\"}>\r\n        <SplitInput\r\n          name={split.name}\r\n          value={split.value}\r\n          onChange={split.onChange}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;;;AAAA;;;AAEO,SAAS,WAAW,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE;IACrD,qBACE,qKAAC;QACC,SAAS;QACT,UAAU;QACV,WAAW,CAAC,iDAAiD,CAAC;kBAE9D,cAAA,qKAAC;YACC,WAAW,CAAC,kJAAkJ,CAAC;sBAE9J;;;;;;;;;;;AAIT;AAEO,SAAS,aAAa,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAE,KAAK,EAAE;IACpE,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC;gBAAM,SAAS;0BAAQ;;;;;;0BACxB,qKAAC;gBACC,MAAM;gBACN,OAAO;gBACP,MAAK;gBACL,UAAU,CAAC,QAAU,SAAS,MAAM,MAAM,CAAC,KAAK;gBAChD,QAAQ,CAAC,QAAU,OAAO,MAAM,MAAM,CAAC,KAAK;gBAC5C,WAAW;gBACX,aAAY;;;;;;YAEb,sBACC,qKAAC;gBAAE,WAAU;0BAAwB;;;;;qCAErC,qKAAC;gBAAE,WAAU;0BAAU;;;;;;;;;;;;AAI/B;AAEO,SAAS,WAAW,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE;IAClD,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC;gBAAM,SAAS,CAAC,MAAM,EAAE,MAAM;0BAAE;;;;;;0BACjC,qKAAC;gBACC,MAAM,CAAC,MAAM,EAAE,MAAM;gBACrB,OAAO;gBACP,MAAK;gBACL,UAAU,CAAC,QAAU,SAAS,OAAO,MAAM,MAAM,CAAC,KAAK;gBACvD,WAAW;gBACX,aAAa;gBACb,KAAK;gBACL,MAAM;;;;;;;;;;;;AAId;AAEO,SAAS,aAAa,EAAE,OAAO,EAAE,KAAK,EAAE;IAC7C,qBACE,qKAAC;QAAI,WAAW;;0BACd,qKAAC;gBAAI,WAAW;0BACd,cAAA,qKAAC;oBACC,OAAO,QAAQ,KAAK;oBACpB,OAAO,QAAQ,KAAK;oBACpB,UAAU,QAAQ,QAAQ;oBAC1B,QAAQ,QAAQ,MAAM;oBACtB,OAAO,QAAQ,KAAK;;;;;;;;;;;0BAGxB,qKAAC;gBAAI,WAAW;0BACd,cAAA,qKAAC;oBACC,MAAM,MAAM,IAAI;oBAChB,OAAO,MAAM,KAAK;oBAClB,UAAU,MAAM,QAAQ;;;;;;;;;;;;;;;;;AAKlC"}},
    {"offset": {"line": 219, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Ref/Programming/Practise/5/partner/src/pages/index.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport Web3 from \"web3\";\r\n\r\nimport Contract from \"../contract/Contract\";\r\nimport { MainButton, AddressInput } from \"../components\";\r\n\r\nexport default function Withdraw() {\r\n  const web3 = useRef(null);\r\n\r\n  const [address, setAddress] = useState(\"\");\r\n  const [error, setError] = useState(false);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [currentAccount, setCurrentAccount] = useState(null);\r\n  const [hasWalletWarning, setHasWalletWarning] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const hasWallet = checkIfWalletIsConnected();\r\n    setHasWalletWarning(!hasWallet);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (web3.current) {\r\n      return;\r\n    }\r\n\r\n    if (!checkIfWalletIsConnected()) {\r\n      return;\r\n    }\r\n\r\n    web3.current = new Web3(window.ethereum);\r\n    web3.current.eth.getBlock(\"latest\").then(console.log);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    getAuthorizedAccount();\r\n  }, []);\r\n\r\n  const checkIfWalletIsConnected = () => {\r\n    return Boolean(window.ethereum);\r\n  };\r\n\r\n  const getAuthorizedAccount = async () => {\r\n    if (!checkIfWalletIsConnected()) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { ethereum } = window;\r\n\r\n      const accounts = await ethereum.request({ method: \"eth_accounts\" });\r\n\r\n      if (accounts.length !== 0) {\r\n        const account = accounts[0];\r\n        console.log(\"Found an authorized account:\", account);\r\n        setCurrentAccount(account);\r\n      } else {\r\n        console.log(\"No authorized account found\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const connectWallet = async () => {\r\n    if (!checkIfWalletIsConnected()) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { ethereum } = window;\r\n\r\n      const accounts = await ethereum.request({\r\n        method: \"eth_requestAccounts\",\r\n      });\r\n\r\n      console.log(\"Connected\", accounts[0]);\r\n      setCurrentAccount(accounts[0]);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleWithdraw = async () => {\r\n    const { abi } = Contract;\r\n    const contract = new web3.current.eth.Contract(abi, address);\r\n\r\n    const gas = await contract.methods.withdraw().estimateGas();\r\n\r\n    setIsProcessing(true);\r\n\r\n    contract.methods\r\n      .withdraw()\r\n      .send({\r\n        from: currentAccount,\r\n        gas,\r\n      })\r\n      .on(\"error\", (error) => {\r\n        console.log(\"error\", error);\r\n        setIsProcessing(false);\r\n      })\r\n      .on(\"receipt\", (receipt) => {\r\n        // receipt will contain deployed contract address\r\n        console.log(\"Receipt\", receipt);\r\n\r\n        setIsProcessing(false);\r\n      })\r\n      .on(\"confirmation\", (_confirmationNumber, receipt) => {\r\n        console.log(\"Confirmed\", receipt);\r\n      });\r\n  };\r\n\r\n  const addressInput = (\r\n    <AddressInput\r\n      label={\"\"}\r\n      id={\"withdraw\"}\r\n      value={address}\r\n      onChange={(value) => {\r\n        setAddress(value);\r\n      }}\r\n      onBlur={(value) => {\r\n        const isValueAddress = web3.current.utils.isAddress(value);\r\n        setError(isValueAddress ? \"\" : \"Enter a valid wallet address\");\r\n      }}\r\n      error={error}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <main className=\"flex flex-1 flex-col items-center justify-start py-8 pt-12 md:pt-20 text-zinc-700 px-6\">\r\n      <h1 className=\"text-5xl font-extrabold mb-3 pb-2\">Withdraw</h1>\r\n\r\n      <section className=\"max-w-md text-center\">\r\n        <p className=\"text-md mb-4\">\r\n          Initiate a payout from a given Partnerly contract to the recorded\r\n          addresses in that contract.\r\n        </p>\r\n        {hasWalletWarning && (\r\n          <p className=\"mt-4 text-red-600\">\r\n            You will need Metamask or equivalent to use this app.\r\n          </p>\r\n        )}\r\n        {!currentAccount && (\r\n          <div className=\"mt-4\">\r\n            <MainButton onClick={connectWallet} label={\"Connect Wallet\"} />\r\n          </div>\r\n        )}\r\n\r\n        {currentAccount && (\r\n          <section>\r\n            <div className=\"grid grid-cols-1 gap-3 mb-3\">{addressInput}</div>\r\n\r\n            <div className=\"flex flex-col justify-center items-center\">\r\n              <div>\r\n                <MainButton\r\n                  onClick={handleWithdraw}\r\n                  disabled={Boolean(error) || !Boolean(address) || isProcessing}\r\n                  label={isProcessing ? \"Processing\" : \"Withdraw\"}\r\n                />\r\n              </div>\r\n            </div>\r\n          </section>\r\n        )}\r\n      </section>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 440, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}